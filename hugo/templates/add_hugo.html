{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'hugo/css/hugo.css' %}">
{% endblock %}

{% block page_header %}
<div class="header-container">
	<div class="row">
		<div class="col"></div>
	</div>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
	<div class="row py-3 text-center pt-5 justify-content-center">
		<div class="col-12">
			<span class="icon pt-3 pt-mt-5">
				<i class="fas fa-robot fa-3x py-5 mt-5"></i>
			</span>
			<h2 class="display-font text-center pt-3">AI Art Generator</h2>
			<p class="text-center body-font mx-5 my-3 px-4">Hi, <strong>{{ user.profile|upper }}! </strong></p>
			<hr class="my-2">
			<p class="body-font mx-5">Use our new AI tool to generate unique artwork!</p>
		</div>
	</div>
</div>

<div class="container-fluid">
	<div class="row d-flex justify-content-center">
		<div class="col-md-8 justify-content-center">
			<div class="card p-3 p-sm-4 p-md-5 my-0 mx-auto bg-main text-light body-font">
				<form method="POST" action="{% url 'add_hugo' %}" class="form" enctype="multipart/form-data"
					onsubmit="return showLoading()">
					{% csrf_token %}
					{% for field in form %}
					{% if field.name == 'artwork_description' %}
					{{ field | as_crispy_field }}
					<div class="text-start mb-3">
						<a class="body-font random-prompt" onclick="generateRandomPrompt()">
							Surprise Me!</a>
					</div>
					{% else %}
					{{ field | as_crispy_field }}
					{% endif %}
					{% endfor %}
					<div class="text-right">
						<button>
							<a class="btn btn-dark rounded-0" href="{% url 'hugo' %}">Cancel</a>
						</button>
						<button id="createArtBtn" class="btn btn-dark rounded-0" type="submit">Create Art</button>
					</div>
				</form>
				<div id="loadingMessage" class="text-center" style="display: none;">
					Generating art... Please wait.
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}

{% block postloadjs %}
{{ block.super }}
<script>
	function showLoading() {
		document.getElementById('createArtBtn').disabled = true;
		document.getElementById('loadingMessage').style.display = 'block';
		return true;  // Proceed with form submission
	}

	function generateRandomPrompt() {
		var prompts = [
			"A surreal landscape with floating islands",
			"A futuristic cityscape at sunset",
			"An enchanted forest with magical creatures",
			"A steampunk-inspired flying machine",
			"Abstract art with vibrant colors and geometric shapes",
			"A serene beach scene with crashing waves",
			"A whimsical depiction of a talking animal",
			"Realistic painting of a dystopian industrial city with towering factories, pollution-filled air, and a gloomy sky",
			"Digital illustration of a dimension breaking apart, using vivid colors and fractured elements",
			"Cyberpunk digital art of a neon-lit city with a samurai figure, highlighting the contrast between traditional and futuristic",
			"Darth Vader in a cityscape at night, with bright lights and tall buildings, monumental, japanese wood block style",
			"Superman, playing an instrument or singing in a green, mountaneous meadow"
		];

		var randomPrompt = prompts[Math.floor(Math.random() * prompts.length)];
		document.getElementById('id_artwork_description').value = randomPrompt;
	}

</script>
{% endblock %}